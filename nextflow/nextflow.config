nextflow.enable.dsl=2

params {
  // Single-run inputs (ignored if samplesheet is provided)
  id     = 'run1'
  counts = null
  meta   = null

  // Batch mode
  samplesheet = null

  // Outputs
  outdir = 'results'

  // R script CLI passthrough defaults (match your script defaults)
  sample_col         = 'Sample'
  group_col          = 'Condition'
  ref_level          = 'Control'
  feature_col        = ''          // empty = auto-detect in your R script
  covariates         = ''          // e.g. "age,sex,batch"
  filter_logcpm      = 1
  filter_min_samples = 0           // 0 = min group size
  alpha              = 0.05
  lfc                = 0.58
  counts_sheet       = 1
  meta_sheet         = 1
}

process {
  executor = 'local'
  withName: LIMMA_VOOM {
    cpus   = 2
    memory = '6 GB'
    time   = '2h'
  }
}

timeline {
  enabled = true
  file = "${params.outdir}/timeline.html"
}
report {
  enabled = true
  file = "${params.outdir}/report.html"
}
trace {
  enabled = true
  file = "${params.outdir}/trace.tsv"
}

profiles {
  conda {
    conda.enabled = true
    // If conda solve is slow, you can set:
    // conda.mamba = true
  }

  // Optional future profile if you add a container later:
  docker {
    docker.enabled = true
    // process.container = 'YOUR_IMAGE:TAG'
  }

  singularity {
    singularity.enabled = true
    // process.container = 'YOUR_IMAGE:TAG'
  }
}

report {
  enabled = true
  file = "${params.outdir}/report.html"
  overwrite = true
}
timeline {
  enabled = true
  file = "${params.outdir}/timeline.html"
  overwrite = true
}

trace {
  enabled = true
  file = "${params.outdir}/trace.tsv"
  overwrite = true
}

